<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
  <script data-require="jquery@*" data-semver="2.1.3" src="//code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="js/bootstrap.min.js" type="text/javascript"></script>
  <script data-require="angular.js@1.4.0-beta.5" data-semver="1.4.0-beta.5" src="//code.angularjs.org/1.4.0-beta.5/angular.js"></script>
  <script type="text/javascript" src="https://code.angularjs.org/1.4.0-beta.5/angular-messages.min.js"></script>
  <script src="js/script.js" type="text/javascript"></script>
</head>

<body>
  <article class="container" ng-app="myApp">
    <h1 class="text-center">Waitstaff Calculator</h1>
    <section class="row calculator" ng-controller="waitstaffCtrl">
      <div class="col-sm-7 meal">
        <h3 class="text-center">Enter the meal details</h3>
        <form name="myForm" class="form" ng-submit="newMeal(input)" novalidate>
          <div class="form-group">
            <label class="sr-only" for="baseMealPrice"></label>
            <div class="input-group">
              <div class="input-group-addon">$</div>
              <input type="number" step="any" ng-pattern="/^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?$/" class="form-control" ng-model="input.baseMealPrice" name="baseMealPrice" id="baseMealPrice" placeholder="0.00" required>
            </div>
          </div>
          <div ng-if="myForm.$submitted" ng-messages="myForm.baseMealPrice.$error">
            <span class="text-danger" ng-message="required"> | A price is required!</span>
            <span class="text-danger" ng-message="number"> | Enter a valid price</span>
          </div>
          <div class="form-group">
            <label class="sr-only" for="taxRate"></label>
            <div class="input-group">
              <div class="input-group-addon">Tax</div>
              <input type="number" step="any" ng-pattern="/^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?$/" class="form-control" ng-model="input.taxRate" name="taxRate" id="taxRate" placeholder="0.00" value="8.5" required>
              <div class="input-group-addon">%</div>
            </div>
          </div>
          <div ng-if="myForm.$submitted" ng-messages="myForm.taxRate.$error">
            <span class="text-danger" ng-message="required"> | A tax rate is required!</span>
            <span class="text-danger" ng-message="number"> | Enter a valid number</span>
          </div>
          <div class="form-group">
            <label class="sr-only" for="tipPercent"></label>
            <div class="input-group">
              <div class="input-group-addon">Tip</div>
              <input type="number" step="any" ng-pattern="/^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?$/" class="form-control" ng-model="input.tipPercent" name="tipPercent" id="tipPercent" placeholder="0" required>
              <div class="input-group-addon">%</div>
            </div>
          </div>
          <div ng-if="myForm.$submitted" ng-messages="myForm.tipPercent.$error">
            <span class="text-danger" ng-message="required"> | A tip is required!</span>
            <span class="text-danger" ng-message="number"> | Enter a  tip amount or 0</span>
          </div>
          <div class="form-group text-center row">
            <div class="col-xs-6">
              <input type="submit" class="btn btn-success btn-block btn-lg" ng-click=""></input>
            </div>
            <div class="col-xs-6">
              <button type="button" class="btn btn-danger btn-block btn-lg" ng-click="cancel()">Cancel</button>
            </div>
          </div>
        </form>
      </div>
      <div class="col-sm-5">
        <div class="customer col-sm-12">
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th colspan="2">
                  <h3>Customer Charges</h3>
                </th>
              </tr>
            </thead>
            <tr>
              <td>Price:</td>
              <td>{{customer.basePrice | currency}}</td>
            </tr>
            <tr>
              <td>CA Tax ({{customer.tax}}%):</td>
              <td>{{customer.tax / 100 * customer.basePrice | currency}}</td>
            </tr>
            <tr>
              <td>Subtotal:</td>
              <td>{{customer.subtotal | currency}}</td>
            </tr>
            <tr>
              <td>Tip ({{input.tipPercent}}%): </td>
              <td>{{customer.tipPercent | currency}}</td>
            </tr>
            <tr>
              <td><strong>Total</strong>
              </td>
              <td><strong>{{customer.subtotal + customer.tipPercent | currency}}</strong>
              </td>
            </tr>
          </table>
        </div>
        <div class="earning col-sm-12">
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th colspan="2">
                  <h3>My Earnings Info</h3>
                </th>
              </tr>
            </thead>
            <tr>
              <td>Tip Total:</td>
              <td>{{staff.tip | currency}}</td>
            </tr>
            <tr>
              <td>Meal Count:</td>
              <td>{{staff.mealCount | number}}</td>
            </tr>
            <tr>
              <td>Average Tip Per Meal:</td>
              <td>{{staff.ATPM | currency}}</td>
            </tr>
          </table>
          <button type="button" class="btn btn-default btn-lg pull-right" ng-click="reset()">Reset</button>
        </div>
      </div>
    </section>
  </article>
</body>

</html>